webpackJsonp([1],{"0AzE":function(e,t){},"4JRW":function(e,t){},"4Uem":function(e,t){},"5ip+":function(e,t){},"6GZG":function(e,t){},CuRo:function(e,t){},FVuk:function(e,t){},LAfi:function(e,t){},NCQR:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("0AzE"),a("CuRo");var r,l=a("7+uW"),o=a("9rMa"),n=(a("6LYt"),{id:"",name:"",mobile:"",token:null}),s=a("mUbh"),i=a("UjVw"),u=a("bOdI"),c=a.n(u),m=(r={},c()(r,"login",function(e,t){localStorage.setItem("id",t.id),localStorage.setItem("name",t.name),localStorage.setItem("mobile",t.mobile),localStorage.setItem("token",t.token),e.id=t.id,e.name=t.name,e.mobile=t.mobile,e.token=t.token}),c()(r,"logout",function(e){localStorage.removeItem("id"),localStorage.removeItem("name"),localStorage.removeItem("mobile"),localStorage.removeItem("token"),e.id="",e.name="",e.mobile="",e.token=""}),r);l.default.use(o.a);var d=new o.a.Store({state:n,mutations:m,getters:i,actions:s,strict:!1,plugin:[]}),p=a("//Fk"),g=a.n(p),f=a("aozt"),v=a.n(f),b=a("/ocq"),h={name:"TopHeader",data:function(){return{id:"",mobile:"",name:""}},methods:{quit:function(){this.$store.commit("logout"),this.$router.push({name:"Login"})}},mounted:function(){this.id=localStorage.getItem("id"),this.name=localStorage.getItem("name"),this.mobile=localStorage.getItem("mobile")}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-header",[a("el-dropdown",[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("router-link",{attrs:{to:{name:"Password",params:{id:e.id,mobile:e.mobile}},tag:"span"}},[e._v("\n          修改密码\n        ")])],1),e._v(" "),a("el-dropdown-item",[a("span",{on:{click:e.quit}},[e._v("退出")])])],1)],1),e._v(" "),a("span",[e._v(e._s(e.name))])],1)},staticRenderFns:[]};var y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{attrs:{router:!0}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("用户管理")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"TravelUserList"},index:"1-1"}},[e._v("旅行社")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"GuideUserList"},index:"1-2"}},[e._v("导游")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"MerchantUserList"},index:"1-3"}},[e._v("商家")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"VisitorUserList"},index:"1-4"}},[e._v("游客")])],2),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),e._v("景区管理")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PlaceList"},index:"2-1"}},[e._v("景区列表")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PlaceAdd"},index:"2-2"}},[e._v("添加景区")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PlaceUserList"},index:"2-3"}},[e._v("景区人员列表")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PlaceUserAdd"},index:"2-4"}},[e._v("添加景区人员")])],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),e._v("计费管理")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"BillingList"},index:"3-1"}},[e._v("计费模板")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"BillingAdd"},index:"3-2"}},[e._v("计费添加")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"CategoryList"},index:"3-3"}},[e._v("票务分类")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"CategoryAdd"},index:"3-4"}},[e._v("添加分类")])],2),e._v(" "),a("el-submenu",{attrs:{index:"34"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-goods"}),e._v("预付费管理")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PrepayList"},index:"34-1"}},[e._v("预付费列表")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"PrepayAdd"},index:"34-2"}},[e._v("充值")])],2),e._v(" "),a("el-submenu",{attrs:{index:"4"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-date"}),e._v("订单管理")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"OrderList"},index:"4-1"}},[e._v("订单列表")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"OrderAdd"},index:"4-2"}},[e._v("添加线下订单")])],2),e._v(" "),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-view"}),e._v("统计分析")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"Merchant"},index:"5-1"}},[e._v("商家票务数")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"Income"},index:"5-2"}},[e._v("票务收入")]),e._v(" "),a("el-menu-item",{attrs:{route:{name:"People"},index:"5-3"}},[e._v("接待人数")])],2)],1)],1)},staticRenderFns:[]};var x={name:"Main",methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}},data:function(){return{name:"王小虎"}},components:{TopHeader:a("VU/8")(h,_,!1,function(e){a("Zoxs")},"data-v-2f5b3fca",null).exports,LeftMenu:a("VU/8")({name:"LeftMenu",data:function(){return{msg:""}}},y,!1,function(e){a("k3lw")},"data-v-5ca84ac0",null).exports}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}},[t("TopHeader"),this._v(" "),t("el-container",[t("LeftMenu"),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var $=a("VU/8")(x,F,!1,function(e){a("cgPv")},null,null).exports,w={name:"Index",data:function(){return{msg:"登录成功！"+(new Date).toLocaleString()}}},k={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"welcome"},[t("h3",[this._v(this._s(this.msg))])])},staticRenderFns:[]};var D=a("VU/8")(w,k,!1,function(e){a("wjH3")},"data-v-645beb9b",null).exports,S={name:"LoginAdd",data:function(){return{ruleForm:{mobile:"",password:"",token:""},rules:{mobile:[{required:!0,message:"请填写手机号",trigger:"blur"}],password:[{required:!0,min:8,max:20,message:"长度在 8 到 20 个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={mobile:t.ruleForm.mobile,password:t.ruleForm.password};t.$axios.post("/admin/user/login",a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"登录成功"}),t.$store.commit("login",e.data.data),t.$router.push({name:"Index"})):t.$message({type:"error",message:e.data.msg})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"登录失败"})})}})}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("p",{staticClass:"title"},[e._v("票务后台管理")]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(S,P,!1,function(e){a("V17K")},"data-v-9eb19236",null).exports,N={name:"GuideUserList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},authStatus:function(e,t,a){var r=this;if(!e||!a)return r.$message({type:"info",message:"此条数据有错误"});r.$confirm("请仔细审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$axios.get("/admin/user/auth?id="+e+"&status="+a).then(function(e){200===e.status&&200===e.data.code?(r.tableData[t].status="pass"===a?1:5,r.$message({type:"success",message:"提交成功!"})):r.$message({type:"error",message:"提交失败"})})}).catch(function(){r.$message({type:"info",message:"已取消提交"})})},formatStatus:function(e,t,a){var r=e.status;return 1===r?"通过":5===r?"拒绝":"提交审核"},formatSex:function(e,t,a){var r="",l=e.sex;return 1===l?r="男":2===l?r="女":3===l&&(r="其他"),r},query:function(e,t){console.log(t),e.$axios.get("/admin/user/guideUserList",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idcard",label:"身份证"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creditCode",label:"导游证号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"travelName",label:"归属旅行社"}}),e._v(" "),a("el-table-column",{attrs:{label:"导游证图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.authPic,target:"_blank"}},[a("img",{staticStyle:{"max-width":"100px",height:"50px"},attrs:{src:e.row.authPic}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditorName",label:"审核人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditTime",label:"审核日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"pass")}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"nopass")}}},[e._v("拒绝")]),e._v(" "),a("router-link",{attrs:{to:{name:"Password",params:{id:t.row.id,mobile:t.row.mobile}}}},[a("el-button",{attrs:{type:"warning",size:"small",title:"修改密码"}},[e._v("改密")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var A=a("VU/8")(N,T,!1,function(e){a("jSB/")},"data-v-92fdf546",null).exports,O={name:"MerchantUserList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},authStatus:function(e,t,a){var r=this;if(!e||!a)return r.$message({type:"info",message:"此条数据有错误"});r.$confirm("请仔细审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$axios.get("/admin/user/auth?id="+e+"&status="+a).then(function(e){200===e.status&&200===e.data.code?(r.tableData[t].status="pass"===a?1:5,r.$message({type:"success",message:"提交成功!"})):r.$message({type:"error",message:"提交失败"})})}).catch(function(){r.$message({type:"info",message:"已取消提交"})})},formatStatus:function(e,t,a){var r=e.status;return 1===r?"通过":5===r?"拒绝":"提交审核"},formatSex:function(e,t,a){var r="",l=e.sex;return 1===l?r="男":2===l?r="女":3===l&&(r="其他"),r},query:function(e,t){console.log(t),e.$axios.get("/admin/user/merchantUserList",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"商家信息证明图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.authPic,target:"_blank"}},[a("img",{staticStyle:{"max-width":"100px",height:"50px"},attrs:{src:e.row.authPic}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditorName",label:"审核人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditTime",label:"审核日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"pass")}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"nopass")}}},[e._v("拒绝")]),e._v(" "),a("router-link",{attrs:{to:{name:"Password",params:{id:t.row.id,mobile:t.row.mobile}}}},[a("el-button",{attrs:{type:"warning",size:"small",title:"修改密码"}},[e._v("改密")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var L=a("VU/8")(O,q,!1,function(e){a("cMjv")},"data-v-614d596c",null).exports,U={name:"TravelUserList",data:function(){return{name:"",tableData:[],totalNum:0}},filters:{formatSex:function(e){var t="";return 1===e?t="男":2===e?t="女":3===e&&(t="其他"),t}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},authStatus:function(e,t,a){var r=this;if(!e||!a)return r.$message({type:"info",message:"此条数据有错误"});r.$confirm("请仔细审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$axios.get("/admin/user/auth?id="+e+"&status="+a).then(function(e){200===e.status&&200===e.data.code?(r.tableData[t].status="pass"===a?1:5,r.$message({type:"success",message:"提交成功!"})):r.$message({type:"error",message:"提交失败"})})}).catch(function(){r.$message({type:"info",message:"已取消提交"})})},formatStatus:function(e,t,a){var r=e.status;return 1===r?"通过":5===r?"拒绝":"提交审核"},formatPrepay:function(e,t,a){return 1===e.isPrepay?"是":"否"},query:function(e,t){console.log(t),e.$axios.get("/admin/user/travelUserList",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("router-link",{attrs:{to:{name:"TravelUserAdd"}}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.search}},[e._v("添加")])],1)],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"旅行社地址："}},[a("span",[e._v(e._s(t.row.orgAddr))])]),e._v(" "),a("el-form-item",{attrs:{label:"性别："}},[a("span",[e._v(e._s(t.row.sex||e.formatSex))])]),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码："}},[a("span",[e._v(e._s(t.row.creditCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"审核人："}},[a("span",[e._v(e._s(t.row.auditorName))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建日期："}},[a("span",[e._v(e._s(t.row.time))])]),e._v(" "),a("el-form-item",{attrs:{label:"审核日期："}},[a("span",[e._v(e._s(t.row.auditTime))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isPrepay",formatter:e.formatPrepay,label:"是否预付费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prepay",label:"累计金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"余额"}}),e._v(" "),a("el-table-column",{attrs:{label:"营业执照照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.authPic,target:"_blank"}},[a("img",{staticStyle:{"max-width":"100px",height:"50px"},attrs:{src:e.row.authPic}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"pass")}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"nopass")}}},[e._v("拒绝")]),e._v(" "),a("router-link",{attrs:{to:{name:"TravelUserAdd",params:{id:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"warning",size:"small"}},[e._v("编辑")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"Password",params:{id:t.row.id,mobile:t.row.mobile}}}},[a("el-button",{attrs:{type:"primary",size:"small",title:"修改密码"}},[e._v("改密")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"PrepayAdd",params:{userId:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"danger",size:"small"}},[e._v("充值")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var z=a("VU/8")(U,C,!1,function(e){a("Qgn8")},"data-v-e9817b2c",null).exports,E={name:"VisitorUserList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},del:function(e,t){var a=this;a.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/admin/user/delete/"+e).then(function(e){200===e.status&&200===e.data.code?(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},formatStatus:function(e,t,a){var r="",l=e.status;return 1===l?r="可用":5===l&&(r="禁用"),r},formatSex:function(e,t,a){var r="",l=e.sex;return 1===l?r="男":2===l?r="女":3===l&&(r="其他"),r},query:function(e,t){console.log(t),e.$axios.get("/admin/user/visitorUserList",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"idcard",label:"身份证"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"Password",params:{id:t.row.id,mobile:t.row.mobile}}}},[a("el-button",{attrs:{type:"warning",size:"small",title:"修改密码"}},[e._v("改密")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var B=a("VU/8")(E,R,!1,function(e){a("ZcEO")},"data-v-11329997",null).exports,M={name:"TravelUserAdd",data:function(){var e=this;return{pageStatus:"add",loading:!1,setHeaders:{Authorization:"Bearer "+this.$store.state.token},ruleForm:{orgAddr:"",mobile:"",password:"",name:"",sex:"",isPrepay:"",creditCode:"",authPic:""},rules:{orgAddr:[{required:!0,message:"请输入旅行社地址",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(t,a,r){var l=e;if(!a)return r(new Error("手机号不能为空"));var o=a.toString();if(!/^1\d{10}$/.test(o))return r(new Error("填写正确的手机号"));l.$axios.get("/admin/user/checkMobile/?pageStatus="+l.pageStatus+"&mobile="+o).then(function(e){return 200===e.status&&200===e.data.code?r():r(new Error(e.data.msg))}).catch(function(e){return r(e)})},trigger:"blur"}],password:[{validator:function(t,a,r){return"edit"===e.pageStatus?r():a?a.length<8||a.length>20?r(new Error("密码长度在 8 - 20 位")):r():r(new Error("密码不能为空"))},trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],isPrepay:[{required:!0,message:"请选择",trigger:"blur"}],creditCode:[{required:!0,message:"请填写统一社会信用代码",trigger:"blur"},{min:18,max:18,message:"18位",trigger:"blur"}],authPic:[{required:!0,message:"请上传",trigger:"blur"}]},id:"",fileListF:[],setDisabled:!1,optionsSex:[{value:1,label:"男"},{value:2,label:"女"},{value:3,label:"其他"}],optionsIsPrepay:[{value:1,label:"是"},{value:2,label:"否"}]}},beforeMount:function(){this.pageStatus="add",this.id=this.$route.params.id,this.row=this.$route.params.row,this.id&&(console.log("id:",this.id),this.pageStatus="edit",this.setDisabled=!0,this.ruleForm=this.row,this.row.authPic&&(this.fileListF=[{name:this.row.authPic,url:this.row.authPic}]))},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",orgAddr:t.ruleForm.orgAddr,mobile:t.ruleForm.mobile,password:t.ruleForm.password,name:t.ruleForm.name,sex:t.ruleForm.sex,isPrepay:t.ruleForm.isPrepay,creditCode:t.ruleForm.creditCode,authPic:t.ruleForm.authPic,status:-1};console.log(a);var r="/admin/user/travelAdd";t.id&&(r="/admin/user/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"保存成功"}),t.$router.push({name:"TravelUserList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}})},handleRemoveF:function(e,t){console.log("handleRemoveF:"),console.log("file"),console.log(e),console.log("fileList"),console.log(t),this.ruleForm.authPic=""},handlePreview:function(e){console.log("handlePreview:"),console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},uploadSuccessF:function(e,t,a){console.log("responseF:"),console.log(e),200===e.code?(console.log("upload ok"),this.ruleForm.authPic=e.data.relativeDir,this.$message({message:"上传成功！",type:"success"})):this.$message({message:e.msg,type:"error"})},uploadError:function(e,t,a){this.$message({message:"上传失败，请重试！",type:"error"}),console.log(e)},beforeUpload:function(e){console.log("file:"),console.log(e);var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<10;return t||this.$message.error("上传正确的格式!"),a||this.$message.error("文件大小不能超过 10MB!"),t&&a}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"旅行社",prop:"name"}},[a("el-input",{attrs:{placeholder:"旅行社名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"orgAddr"}},[a("el-input",{attrs:{placeholder:"旅行社地址"},model:{value:e.ruleForm.orgAddr,callback:function(t){e.$set(e.ruleForm,"orgAddr",t)},expression:"ruleForm.orgAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",disabled:e.setDisabled,placeholder:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.optionsSex,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否预付费",prop:"isPrepay"}},[a("el-select",{model:{value:e.ruleForm.isPrepay,callback:function(t){e.$set(e.ruleForm,"isPrepay",t)},expression:"ruleForm.isPrepay"}},e._l(e.optionsIsPrepay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码",prop:"creditCode"}},[a("el-input",{model:{value:e.ruleForm.creditCode,callback:function(t){e.$set(e.ruleForm,"creditCode",t)},expression:"ruleForm.creditCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照",prop:"authPic"}},[a("el-upload",{staticClass:"upload",attrs:{action:"/admin/user/upload",headers:e.setHeaders,"on-preview":e.handlePreview,"on-remove":e.handleRemoveF,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccessF,name:"image",limit:1,"list-type":"picture","on-exceed":e.handleExceed,"file-list":e.fileListF}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击上传\n        "),a("i",{staticClass:"el-icon-upload el-icon--right"})]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 jpg, png")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var W=a("VU/8")(M,V,!1,function(e){a("uFJv")},"data-v-42d46c6d",null).exports,j={name:"PrepayList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},authStatus:function(e,t,a,r){var l=this;return 1===r?l.$message({type:"error",message:"已经审核通过，不能在修改"}):e&&a?void l.$confirm("请仔细审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.$axios.get("/admin/prepay/auth?id="+e+"&status="+a).then(function(e){200===e.status&&200===e.data.code?(l.tableData[t].status="pass"===a?1:5,l.$message({type:"success",message:"提交成功!"})):l.$message({type:"error",message:"提交失败"})})}).catch(function(){l.$message({type:"info",message:"已取消提交"})}):l.$message({type:"info",message:"此条数据有错误"})},formatStatus:function(e,t,a){var r=e.status;return 1===r?"通过":5===r?"拒绝":"提交审核"},query:function(e,t){console.log(t),e.$axios.get("/admin/prepay/list",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"旅行社名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"充值金额/元"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rechargeTime",label:"充值时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",label:"操作者"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatStatus,label:"审核状态"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"pass",t.row.status)}}},[e._v("通过\n        ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.authStatus(t.row.id,t.$index,"nopass",t.row.status)}}},[e._v("拒绝\n        ")])]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var H=a("VU/8")(j,G,!1,function(e){a("NCQR")},"data-v-0b104444",null).exports,Q={name:"PrepayAdd",data:function(){return{loading:!1,ruleForm:{userId:"",income:"",rechargeTime:""},rules:{userId:[{required:!0,message:"请输入名称",trigger:"blur"}],income:[{required:!0,message:"请输入金额",trigger:"blur"}],rechargeTime:[{required:!0,message:"请输入充值时间",trigger:"blur"}]},id:"",placeOption:[]}},beforeMount:function(){this.ruleForm.userId=this.$route.params.userId,this.row=this.$route.params.row,this.ruleForm.userId&&(this.placeOption=[{value:this.row.id,label:this.row.name}])},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",userId:t.ruleForm.userId,income:t.ruleForm.income,rechargeTime:t.ruleForm.rechargeTime,status:-1};console.log(a);var r="/admin/prepay/add";t.id&&(r="/admin/prepay/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"保存成功"}),t.$router.push({name:"PrepayList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}else t.$message({type:"error",message:"保存失败"})})},travelRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/prepay/orgName/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.placeOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"旅行社",prop:"userId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"输入旅行社名称：模糊查询","remote-method":e.travelRemoteMethod,loading:e.loading},model:{value:e.ruleForm.userId,callback:function(t){e.$set(e.ruleForm,"userId",t)},expression:"ruleForm.userId"}},e._l(e.placeOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"金额/元",prop:"income"}},[a("el-input",{model:{value:e.ruleForm.income,callback:function(t){e.$set(e.ruleForm,"income",e._n(t))},expression:"ruleForm.income"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"充值时间",prop:"rechargeTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.ruleForm.rechargeTime,callback:function(t){e.$set(e.ruleForm,"rechargeTime",t)},expression:"ruleForm.rechargeTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var J=a("VU/8")(Q,Z,!1,function(e){a("RIiA")},"data-v-1ecc311f",null).exports,Y={name:"Password",data:function(){return{ruleForm:{id:"",mobile:"",password:""},rules:{password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,max:20,message:"长度在 8 到 20 个字符",trigger:"blur"}]}}},beforeMount:function(){this.ruleForm.id=this.$route.params.id,this.ruleForm.mobile=this.$route.params.mobile,console.log(this.ruleForm.id)},methods:{submitForm:function(e){var t=this;t.$refs[e].validate(function(e){if(e){var a={id:t.ruleForm.id,mobile:t.ruleForm.mobile,password:t.ruleForm.password};t.$axios.post("/admin/user/password",a).then(function(e){200===e.status&&200===e.data.code?(t.ruleForm.password="",t.$message({type:"success",message:"提交成功"})):t.$message({type:"error",message:"提交失败"})}).catch(function(e){console.log(e),t.$message({type:"error",message:"提交失败"})})}else t.$message({type:"error",message:"提交失败"})})}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var X=a("VU/8")(Y,K,!1,function(e){a("wB4W")},"data-v-dad8d77c",null).exports,ee={name:"PlaceList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};console.log(t);var a=this;a.$axios.get("/admin/place/list",{params:t}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?(a.tableData=e.data.data.tableData,a.totalNum=e.data.data.totalNum):(a.tableData=[],a.totalNum=0)}).catch(function(e){console.log("查询err: "+e),a.tableData=[],a.totalNum=0})},search:function(){var e={name:this.name};console.log(e);var t=this;t.$axios.get("/admin/place/list",{params:e}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?(t.tableData=e.data.data.tableData,t.totalNum=e.data.data.totalNum):(t.tableData=[],t.totalNum=0)}).catch(function(e){console.log("查询err: "+e),t.tableData=[],t.totalNum=0})},del:function(e,t){var a=this;a.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/admin/user/delete/"+e).then(function(e){200===e.status&&200===e.data.code?(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},formatLevel:function(e,t,a){var r="",l=e.level;return 1===l?r="1A":2===l?r="2A":3===l?r="3A":4===l?r="4A":5===l&&(r="5A"),r},formatStatus:function(e,t,a){var r="",l=e.status;return 1===l?r="启用":5===l&&(r="禁用"),r}},mounted:function(){var e=this;e.$axios.get("/admin/place/list").then(function(t){200===t.status&&200===t.data.code&&(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum)})}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"地点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",formatter:e.formatLevel,label:"等级"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"是否启用"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"PlaceAdd",params:{id:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("4Uem")},"data-v-77a589e2",null).exports,re={name:"PlaceAdd",data:function(){return{ruleForm:{name:"",addr:"",mobile:"",level:"",status:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:1,max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],addr:[{required:!0,message:"请输入地点",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],level:[{required:!0,message:"请选择等级",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},id:"",optionsLevel:[{value:1,label:"1A"},{value:2,label:"2A"},{value:3,label:"3A"},{value:4,label:"4A"},{value:5,label:"5A"}],optionsStatus:[{value:1,label:"启用"},{value:5,label:"禁用"}]}},beforeMount:function(){this.id=this.$route.params.id,this.row=this.$route.params.row,this.id&&(this.ruleForm=this.row)},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",name:t.ruleForm.name,addr:t.ruleForm.addr,mobile:t.ruleForm.mobile,level:t.ruleForm.level,status:t.ruleForm.status};console.log(a);var r="/admin/place/add";t.id&&(r="/admin/place/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"添加成功"}),t.$router.push({name:"PlaceList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"添加失败"})})}else t.$message({type:"error",message:"提交失败"})})},resetForm:function(e){this.$refs[e].resetFields()}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地点",prop:"addr"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.addr,callback:function(t){e.$set(e.ruleForm,"addr",t)},expression:"ruleForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级",prop:"level"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.optionsLevel,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.optionsStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(re,le,!1,function(e){a("x+rY")},"data-v-ce97b156",null).exports,ne={name:"PlaceUserList",data:function(){return{name:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},del:function(e,t){var a=this;a.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/admin/user/delete/"+e).then(function(e){200===e.status&&200===e.data.code?(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},formatStatus:function(e,t,a){var r="",l=e.status;return 1===l?r="在岗启用":5===l&&(r="离岗禁用"),r},formatSex:function(e,t,a){var r="",l=e.sex;return 1===l?r="男":2===l?r="女":3===l&&(r="其他"),r},query:function(e,t){console.log(t),e.$axios.get("/admin/user/placeUserList",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",label:"景区"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",formatter:e.formatSex,label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"PlaceUserAdd",params:{id:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("编辑")])],1),e._v(" "),a("router-link",{attrs:{to:{name:"Password",params:{id:t.row.id,mobile:t.row.mobile}}}},[a("el-button",{attrs:{type:"warning",size:"small",title:"修改密码"}},[e._v("改密")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var ie=a("VU/8")(ne,se,!1,function(e){a("wBCO")},"data-v-3c73d1b0",null).exports,ue={name:"PlaceUserAdd",data:function(){var e=this;return{pageStatus:"add",loading:!1,ruleForm:{parent:"",mobile:"",password:"",name:"",sex:"",status:""},rules:{parent:[{required:!0,message:"请输入名称",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(t,a,r){var l=e;if(!a)return r(new Error("手机号不能为空"));var o=a.toString();if(!/^1\d{10}$/.test(o))return r(new Error("填写正确的手机号"));l.$axios.get("/admin/user/checkMobile/?pageStatus="+l.pageStatus+"&mobile="+o).then(function(e){return 200===e.status&&200===e.data.code?r():r(new Error(e.data.msg))}).catch(function(e){return r(e)})},trigger:"blur"}],password:[{validator:function(t,a,r){return"edit"===e.pageStatus?r():a?a.length<8||a.length>20?r(new Error("密码长度在 8 - 20 位")):r():r(new Error("密码不能为空"))},trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},id:"",setDisabled:!1,placeOption:[],optionsSex:[{value:1,label:"男"},{value:2,label:"女"},{value:3,label:"其他"}],optionsStatus:[{value:1,label:"在岗启用"},{value:5,label:"离岗禁用"}]}},beforeMount:function(){this.pageStatus="add",this.id=this.$route.params.id,this.row=this.$route.params.row,this.id&&(this.pageStatus="edit",this.setDisabled=!0,this.ruleForm=this.row,this.placeOption=[{value:this.row.parent,label:this.row.parentName}])},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",parent:t.ruleForm.parent,mobile:t.ruleForm.mobile,password:t.ruleForm.password,name:t.ruleForm.name,sex:t.ruleForm.sex,status:t.ruleForm.status};console.log(a);var r="/admin/user/placeAdd";t.id&&(r="/admin/user/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"保存成功"}),t.$router.push({name:"PlaceUserList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}else t.$message({type:"error",message:"保存失败"})})},placeRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/place/name/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.placeOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",disabled:e.setDisabled,placeholder:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.optionsSex,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.optionsStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"归属景区",prop:"parent"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"输入景区：模糊查询","remote-method":e.placeRemoteMethod,loading:e.loading},model:{value:e.ruleForm.parent,callback:function(t){e.$set(e.ruleForm,"parent",t)},expression:"ruleForm.parent"}},e._l(e.placeOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var me=a("VU/8")(ue,ce,!1,function(e){a("LAfi")},"data-v-633b838c",null).exports,de={name:"CategoryList",data:function(){return{name:"",placeName:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,placeName:this.placeName,currentPage:e.currentPage,pageSize:e.pageSize};console.log(t);var a=this;a.$axios.get("/admin/category/list",{params:t}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?(a.tableData=e.data.data.tableData,a.totalNum=e.data.data.totalNum):(a.tableData=[],a.totalNum=0)}).catch(function(e){console.log("查询err: "+e),a.tableData=[],a.totalNum=0})},search:function(){var e={name:this.name,placeName:this.placeName};console.log(e);var t=this;t.$axios.get("/admin/category/list",{params:e}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?(t.tableData=e.data.data.tableData,t.totalNum=e.data.data.totalNum):(t.tableData=[],t.totalNum=0)}).catch(function(e){console.log("查询err: "+e),t.tableData=[],t.totalNum=0})},del:function(e,t){var a=this;a.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/admin/user/delete/"+e).then(function(e){200===e.status&&200===e.data.code?(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},mounted:function(){var e=this;e.$axios.get("/admin/category/list").then(function(t){200===t.status&&200===t.data.code&&(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum)})}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"分类名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-input",{attrs:{placeholder:"景区名称"},model:{value:e.placeName,callback:function(t){e.placeName=t},expression:"placeName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"placeName",label:"景区名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",label:"操作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"CategoryAdd",params:{id:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var ge=a("VU/8")(de,pe,!1,function(e){a("aqhl")},"data-v-91ee6b2c",null).exports,fe={name:"CategoryAdd",data:function(){var e=this;return{pageStatus:"add",loading:!1,ruleForm:{placeId:"",name:""},rules:{placeId:[{required:!0,message:"请输入景区名称",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{validator:function(t,a,r){var l=e;return"edit"===l.pageStatus?r():l.ruleForm.placeId?(l.id="",a&&(a=a.toString().trim())?void l.$axios.get("/admin/category/checkName/?pageStatus="+l.pageStatus+"&name="+a+"&placeId="+l.ruleForm.placeId).then(function(e){return 200===e.status&&200===e.data.code?r():r(new Error(e.data.msg))}).catch(function(e){return r(e)}):r(new Error("不能为空"))):(l.ruleForm.name="",r(new Error("请先填写归属景区")))},trigger:"blur"}]},id:"",setDisabled:!1,placeOption:[]}},beforeMount:function(){this.pageStatus="add",this.id=this.$route.params.id,this.row=this.$route.params.row,this.id&&(this.pageStatus="edit",this.setDisabled=!0,this.ruleForm=this.row,this.placeOption=[{value:this.row.placeId,label:this.row.placeName}])},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",placeId:t.ruleForm.placeId,name:t.ruleForm.name};console.log(a);var r="/admin/category/add";t.id&&(r="/admin/category/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"添加成功"}),t.$router.push({name:"CategoryList"})):t.$message({type:"error",message:"保存失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}else t.$message({type:"error",message:"保存失败"})})},placeRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/place/name/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.placeOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}}}},ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"归属景区",prop:"placeId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.setDisabled,placeholder:"输入景区：模糊查询","remote-method":e.placeRemoteMethod,loading:e.loading},model:{value:e.ruleForm.placeId,callback:function(t){e.$set(e.ruleForm,"placeId",t)},expression:"ruleForm.placeId"}},e._l(e.placeOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var be=a("VU/8")(fe,ve,!1,function(e){a("nWmk")},"data-v-1978f978",null).exports,he={name:"BillingList",data:function(){return{name:"",placeName:"",tableData:[],totalNum:0}},methods:{getTablePageData:function(e){var t={name:this.name,placeName:this.placeName,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name,placeName:this.placeName};this.query(this,e)},del:function(e,t){var a=this;a.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get("/admin/user/delete/"+e).then(function(e){200===e.status&&200===e.data.code?(a.tableData.splice(t,1),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"error",message:"删除失败"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},formatStatus:function(e,t,a){var r=e.status;return 1===r?"启用":5===r?"禁用":"提交审核"},formatType:function(e,t,a){return 1===e.type?"团体票":"个体票"},query:function(e,t){console.log(t),e.$axios.get("/admin/billing/list",{params:t}).then(function(t){200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})}},mounted:function(){this.query(this,{})}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"景区名称"},model:{value:e.placeName,callback:function(t){e.placeName=t},expression:"placeName"}}),e._v(" "),a("el-input",{attrs:{placeholder:"用户姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"placeName",label:"景区名称"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatType,label:"票类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cname",label:"票分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"旅行社/商家/导游"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单价/元"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatStatus,label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",label:"操作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"更新日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"BillingAdd",params:{id:t.row.id,row:t.row}}}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("编辑")])],1)]}}])})],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var ye=a("VU/8")(he,_e,!1,function(e){a("6GZG")},"data-v-48e1f224",null).exports,xe={name:"BillingAdd",data:function(){return{pageStatus:"add",loading:!1,ruleForm:{placeId:"",userId:"",type:"",categoryId:"",unit:"",people:"",status:""},rules:{placeId:[{required:!0,message:"请输入景区名称",trigger:"blur"}],unit:[{required:!0,message:"请输入单价",trigger:"blur"}],categoryId:[{required:!0,message:"请选择分类",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},id:"",setDisabled:!1,placeOption:[],travelOption:[],optionsType:[{value:1,label:"团体票"},{value:2,label:"个体票"}],optionsStatus:[{value:1,label:"启用"},{value:5,label:"禁用"}],optionsCategory:[{value:1,label:"儿童票"},{value:2,label:"老年票"},{value:3,label:"成人票"},{value:5,label:"儿童六一优惠票"}]}},beforeMount:function(){this.pageStatus="add",this.id=this.$route.params.id,this.row=this.$route.params.row,this.id&&(this.pageStatus="edit",this.setDisabled=!0,this.ruleForm=this.row,this.placeOption=[{value:this.row.placeId,label:this.row.placeName}],this.travelOption=[{value:this.row.userId,label:this.row.userName}])},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={id:t.id||"",placeId:t.ruleForm.placeId,userId:t.ruleForm.userId,type:t.ruleForm.type,categoryId:t.ruleForm.categoryId,unit:t.ruleForm.unit,people:t.ruleForm.people,status:t.ruleForm.status};console.log(a);var r="/admin/billing/add";t.id&&(r="/admin/billing/edit"),t.$axios.post(r,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"保存成功"}),t.$router.push({name:"BillingList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}else t.$message({type:"error",message:"保存失败"})})},placeRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/place/name/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.placeOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}},travelRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/user/orgName/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.travelOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}}}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"归属景区",prop:"placeId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.setDisabled,placeholder:"输入景区模糊查询","remote-method":e.placeRemoteMethod,loading:e.loading},model:{value:e.ruleForm.placeId,callback:function(t){e.$set(e.ruleForm,"placeId",t)},expression:"ruleForm.placeId"}},e._l(e.placeOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"旅行社名称",prop:"userId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.setDisabled,placeholder:"不填则为未设置用户计费","remote-method":e.travelRemoteMethod,loading:e.loading},model:{value:e.ruleForm.userId,callback:function(t){e.$set(e.ruleForm,"userId",t)},expression:"ruleForm.userId"}},e._l(e.travelOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{disabled:e.setDisabled},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.optionsType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[a("el-select",{attrs:{disabled:e.setDisabled},model:{value:e.ruleForm.categoryId,callback:function(t){e.$set(e.ruleForm,"categoryId",t)},expression:"ruleForm.categoryId"}},e._l(e.optionsCategory,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单价/元",prop:"unit"}},[a("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",e._n(t))},expression:"ruleForm.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"团体票最小人数",prop:"people"}},[a("el-input",{model:{value:e.ruleForm.people,callback:function(t){e.$set(e.ruleForm,"people",e._n(t))},expression:"ruleForm.people"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},e._l(e.optionsStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var $e=a("VU/8")(xe,Fe,!1,function(e){a("QPfg")},"data-v-7da6de01",null).exports,we={name:"OrderList",data:function(){return{dialogTableVisible:!1,name:"",tableData:[],totalNum:0,gridData:[]}},methods:{getTablePageData:function(e){var t={name:this.name,currentPage:e.currentPage,pageSize:e.pageSize};this.query(this,t)},search:function(){var e={name:this.name};this.query(this,e)},formatStatus:function(e,t,a){var r="",l=e.payStatus;return 1===l?r="未支付":5===l?r="支付中":10===l?r="支付成功":15===l?r="支付失败":20===l?r="已申请退款":25===l?r="退款成功":26===l?r="退款失败":30===l&&(r="失效"),r},formatType:function(e,t,a){return 1===e.type?"线上":"线下"},formatTicketType:function(e,t,a){return 1===e.type?"团体票":"个体票"},formatpayWay:function(e,t,a){var r="",l=e.payWay;return 1===l?r="预充值":3===l&&(r="微信"),5===l&&(r="现金"),r},query:function(e,t){console.log(t),e.$axios.get("/admin/order/list",{params:t}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?(e.tableData=t.data.data.tableData,e.totalNum=t.data.data.totalNum):(e.tableData=[],e.totalNum=0)}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.totalNum=0})},getTicket:function(e){var t=this;t.gridData=[],t.dialogTableVisible=!0,t.$axios.get("/admin/order/getTicket",{params:{orderId:e}}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?t.gridData=e.data.data:t.gridData=[]}).catch(function(e){console.log("查询err: "+e),t.gridData=[]})}},mounted:function(){this.query(this,{})}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-input",{attrs:{placeholder:"景区名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"placeName",label:"景区名称"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatType,label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPrice",label:"总价/元"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatStatus,label:"支付状态"}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.formatpayWay,label:"充值方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payNum",label:"微信流水号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reserveDate",label:"预约日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enterTime",label:"入园时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.getTicket(t.row.id)}}},[e._v("票分类")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"票分类",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[a("el-table-column",{attrs:{property:"type",formatter:e.formatTicketType,label:"类型",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"categoryName",label:"分类名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"unit",label:"单价/元"}}),e._v(" "),a("el-table-column",{attrs:{property:"number",label:"数量",width:"200"}})],1)],1),e._v(" "),a("pagination",{attrs:{"total-num":e.totalNum},on:{getPageData:e.getTablePageData}})],1)},staticRenderFns:[]};var De=a("VU/8")(we,ke,!1,function(e){a("So7/")},"data-v-267414ed",null).exports,Se={name:"OrderAdd",data:function(){return{pageStatus:"add",loading:!1,team:!0,individual:!1,ruleForm:{placeId:"",userId:"",reserveDate:"",enterTime:"",type:"",people:0,mark:""},rules:{placeId:[{required:!0,message:"请输入归属景区",trigger:"blur"}],userId:[{required:!0,message:"请输入旅行社名称",trigger:"blur"}],reserveDate:[{required:!0,message:"请输入预约日期",trigger:"blur"}]},id:"",setDisabled:!1,placeOption:[],travleOption:[],optionsPayWay:[{value:5,label:"现金"}],tableData:[]}},beforeMount:function(){this.pageStatus="add",this.id=this.$route.params.id,this.row=this.$route.params.row,console.log(this.row),this.id&&(this.pageStatus="edit",this.setDisabled=!0,this.ruleForm=this.row,this.placeOption=[{value:this.row.placeId,label:this.row.placeName}],this.travleOption=[{value:this.row.userId,label:this.row.userName}],this.getOrderTicket(this.id))},computed:{totalPrice:function(){for(var e=0,t=0;t<this.tableData.length;t++)this.tableData[t].number>0&&(e+=this.tableData[t].unit*this.tableData[t].number);return e}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){for(var a={id:t.id||"",placeId:t.ruleForm.placeId,userId:t.ruleForm.userId,reserveDate:t.ruleForm.reserveDate,enterTime:t.ruleForm.enterTime,payWay:t.ruleForm.payWay,mark:t.ruleForm.mark},r=[],l=0;l<t.tableData.length;l++)if(t.tableData[l].number>0){if(1===t.tableData[l].type&&t.tableData[l].number<t.tableData[l].people)return void t.$message({type:"error",message:t.tableData[l].categoryName+"团体票至少人数"+t.tableData[l].people});r.push(t.tableData[l])}if(0===r.length)return void t.$message({type:"error",message:"请选票！"});a.tableData=r,console.log(a);var o="/admin/order/add";t.id&&(o="/admin/order/edit"),t.$axios.post(o,a).then(function(e){200===e.status&&200===e.data.code?(t.$message({type:"success",message:"保存成功"}),t.$router.push({name:"OrderList"})):t.$message({type:"error",message:"添加失败"})}).catch(function(e){console.log("查询err:"),console.log(e),t.$message({type:"error",message:"保存失败"})})}else t.$message({type:"error",message:"保存失败"})})},placeRemoteMethod:function(e){console.log(e);var t=this;if(e){var a="/admin/place/name/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.placeOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}},travelRemoteMethod:function(e){console.log(e);var t=this;if(!t.ruleForm.placeId)return t.$message({type:"error",message:"请先选择景区"});if(e){var a="/admin/user/orgName/"+e;t.$axios.get(a).then(function(e){if(200===e.data.code){console.log(e.data.data);var a=e.data.data;t.travleOption=a.map(function(e){return{value:e.id,label:e.name}})}else console.log(e.data)}).catch(function(e){console.log(e)})}},formatType:function(e,t,a){var r=e.type,l=e.people;return 1===r?"团体票 至少"+l+"张":"个体票"},getNewBill:function(){var e=this,t=e.ruleForm.placeId,a=e.ruleForm.userId;if(t)if(a){var r={placeId:t,userId:a};e.$axios.get("/admin/billing/userBilling",{params:r}).then(function(t){console.log("查询ok"),200===t.status&&200===t.data.code?e.tableData=t.data.data.tableData:(e.tableData=[],e.$message({type:"error",message:"获取选票信息出错！"}))}).catch(function(t){console.log("查询err: "+t),e.tableData=[],e.$message({type:"error",message:"获取选票信息出错！"})})}else e.$message({type:"error",message:"请选旅行社！"});else e.$message({type:"error",message:"请选景区！"})},getOrderTicket:function(e){var t=this;t.$axios.get("/admin/order/editGetTicket",{params:{orderId:e}}).then(function(e){console.log("查询ok"),200===e.status&&200===e.data.code?t.tableData=e.data.data:(t.tableData=[],t.$message({type:"error",message:"获取选票信息出错！"}))}).catch(function(e){console.log("查询err: "+e),t.tableData=[],t.$message({type:"error",message:"获取选票信息出错！"})})}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"归属景区",prop:"placeId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.setDisabled,placeholder:"输入景区模糊查询","remote-method":e.placeRemoteMethod,loading:e.loading},model:{value:e.ruleForm.placeId,callback:function(t){e.$set(e.ruleForm,"placeId",t)},expression:"ruleForm.placeId"}},e._l(e.placeOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"旅行社名称",prop:"userId"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:e.setDisabled,placeholder:"输入旅行社名称模糊查询","remote-method":e.travelRemoteMethod,loading:e.loading},model:{value:e.ruleForm.userId,callback:function(t){e.$set(e.ruleForm,"userId",t)},expression:"ruleForm.userId"}},e._l(e.travleOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"预约入园日期",prop:"reserveDate"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.ruleForm.reserveDate,callback:function(t){e.$set(e.ruleForm,"reserveDate",t)},expression:"ruleForm.reserveDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际入园时间",prop:"enterTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.ruleForm.enterTime,callback:function(t){e.$set(e.ruleForm,"enterTime",t)},expression:"ruleForm.enterTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"支付方式",prop:"payWay"}},[a("el-select",{model:{value:e.ruleForm.payWay,callback:function(t){e.$set(e.ruleForm,"payWay",t)},expression:"ruleForm.payWay"}},e._l(e.optionsPayWay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"mark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.mark,callback:function(t){e.$set(e.ruleForm,"mark",t)},expression:"ruleForm.mark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"选票"}},[a("el-button",{attrs:{type:"primary",disabled:e.setDisabled,title:"景区/旅行社更改后务必刷新"},on:{click:e.getNewBill}},[e._v("刷新计费")]),e._v(" "),a("span",{staticClass:"allfre"},[e._v(" 总费用："+e._s(e.totalPrice)+" 元")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"type",formatter:e.formatType,label:"类型",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单价/元"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"张数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",e._n(a))},expression:"scope.row.number"}})]}}])})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var Ie=a("VU/8")(Se,Pe,!1,function(e){a("4JRW")},"data-v-e0645eb4",null).exports,Ne=a("XMw0"),Te=a.n(Ne),Ae={name:"",data:function(){return{loading:!1,pickerOptions2:{shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近90天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},createdAt:[],charts:"",placeId:"",placeIdOptions:[]}},methods:{search:function(){this.query()},insertOption:function(e){var t={tooltip:{trigger:"axis"},title:{text:""},xAxis:{type:"category",boundaryGap:!1,data:e.map(function(e){return e.time})},yAxis:{type:"value",name:"元"},series:[{type:"line",data:e.map(function(e){return e.totalPrice||0})}]};this.lineOption=t},draw:function(e){var t=this.lineOption;this.charts=Te.a.init(document.getElementById(e)),this.charts.setOption(t),window.onresize=function(){Te.a.init(document.getElementById(e)).resize()}},query:function(){var e=this,t=e.createdAt,a=e.placeId;if(a&&0!==t.length){var r={createAt:t,placeId:a};console.log(r),e.$axios.get("/admin/order/income",{params:r}).then(function(t){200===t.data.code?(console.log(t.data.data),e.insertOption(t.data.data),e.draw("echart1")):e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}else e.$message.error("请选择时间段和景区")}},mounted:function(){var e=this,t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.createdAt=[a,t],e.$axios.get("/admin/place/getAll").then(function(t){if(200===t.data.code){console.log(t.data.data);var a=t.data.data;e.placeIdOptions=a.map(function(e){return{value:e.id,label:e.name}})}else e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"unlink-panels":"","range-separator":"-",editable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.createdAt,callback:function(t){e.createdAt=t},expression:"createdAt"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择景区"},model:{value:e.placeId,callback:function(t){e.placeId=t},expression:"placeId"}},e._l(e.placeIdOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-tag",[e._v("统计指标：按订单创建时间且支付成功")]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"echart1"}})],1)},staticRenderFns:[]};var qe=a("VU/8")(Ae,Oe,!1,function(e){a("i+YZ")},"data-v-bc57dbd6",null).exports,Le={name:"",data:function(){return{loading:!1,pickerOptions2:{shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近90天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},createdAt:[],charts:"",userId:"",userIdOptions:[]}},methods:{search:function(){this.query()},insertOption:function(e){var t={tooltip:{trigger:"axis"},title:{text:""},xAxis:{type:"category",boundaryGap:!1,data:e.map(function(e){return e.time})},yAxis:{type:"value",name:"张"},series:[{type:"line",data:e.map(function(e){return e.number||0})}]};this.lineOption=t},draw:function(e){var t=this.lineOption;this.charts=Te.a.init(document.getElementById(e)),this.charts.setOption(t),window.onresize=function(){Te.a.init(document.getElementById(e)).resize()}},query:function(){var e=this,t=e.createdAt,a=e.userId;if(a&&0!==t.length){var r={createAt:t,userId:a};console.log(r),e.$axios.get("/admin/order/merchant",{params:r}).then(function(t){200===t.data.code?(console.log(t.data.data),e.insertOption(t.data.data),e.draw("echart1")):e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}else e.$message.error("请选择时间段和景区")}},mounted:function(){var e=this,t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.createdAt=[a,t],e.$axios.get("/admin/user/merchant").then(function(t){if(200===t.data.code){console.log(t.data.data);var a=t.data.data;e.userIdOptions=a.map(function(e){return{value:e.id,label:e.name}})}else e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"unlink-panels":"","range-separator":"-",editable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.createdAt,callback:function(t){e.createdAt=t},expression:"createdAt"}}),e._v(" "),a("el-select",{attrs:{placeholder:"青选择商家或导游"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}},e._l(e.userIdOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-tag",[e._v("统计指标：按订单预约入园时间且支付成功")]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"echart1"}})],1)},staticRenderFns:[]};var Ce=a("VU/8")(Le,Ue,!1,function(e){a("tczm")},"data-v-53b3cad0",null).exports,ze={name:"",data:function(){return{loading:!1,pickerOptions2:{shortcuts:[{text:"最近7天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近30天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近90天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},createdAt:[],charts:"",placeId:"",placeIdOptions:[]}},methods:{search:function(){this.query()},insertOption:function(e){var t={tooltip:{trigger:"axis"},title:{text:""},xAxis:{type:"category",boundaryGap:!1,data:e.map(function(e){return e.time})},yAxis:{type:"value",name:"位"},series:[{type:"line",data:e.map(function(e){return e.number||0})}]};this.lineOption=t},draw:function(e){var t=this.lineOption;this.charts=Te.a.init(document.getElementById(e)),this.charts.setOption(t),window.onresize=function(){Te.a.init(document.getElementById(e)).resize()}},query:function(){var e=this,t=e.createdAt,a=e.placeId;if(a&&0!==t.length){var r={createAt:t,placeId:a};console.log(r),e.$axios.get("/admin/order/people",{params:r}).then(function(t){200===t.data.code?(console.log(t.data.data),e.insertOption(t.data.data),e.draw("echart1")):e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}else e.$message.error("请选择时间段和景区")}},mounted:function(){var e=this,t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.createdAt=[a,t],e.$axios.get("/admin/place/getAll").then(function(t){if(200===t.data.code){console.log(t.data.data);var a=t.data.data;e.placeIdOptions=a.map(function(e){return{value:e.id,label:e.name}})}else e.$message.error(t.msg)}).catch(function(t){console.log("查询err: "+t),e.$message.error(t)})}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-date-picker",{attrs:{type:"daterange",clearable:!1,"unlink-panels":"","range-separator":"-",editable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.createdAt,callback:function(t){e.createdAt=t},expression:"createdAt"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择景区"},model:{value:e.placeId,callback:function(t){e.placeId=t},expression:"placeId"}},e._l(e.placeIdOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),a("hr"),e._v(" "),a("el-tag",[e._v("统计指标：按订单实际入园时间且支付成功")]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"echart1"}})],1)},staticRenderFns:[]};var Re=a("VU/8")(ze,Ee,!1,function(e){a("S7VL")},"data-v-f8b5c26a",null).exports;l.default.use(b.a);var Be=new b.a({linkActiveClass:"active",routes:[{path:"/login",name:"Login",component:I},{name:"Main",path:"/",component:$,children:[{path:"/index",name:"Index",component:D},{path:"PlaceList",name:"PlaceList",component:ae},{path:"PlaceAdd",name:"PlaceAdd",component:oe},{path:"PlaceUserList",name:"PlaceUserList",component:ie},{path:"PlaceUserAdd",name:"PlaceUserAdd",component:me},{path:"BillingList",name:"BillingList",component:ye},{path:"BillingAdd",name:"BillingAdd",component:$e},{path:"CategoryList",name:"CategoryList",component:ge},{path:"CategoryAdd",name:"CategoryAdd",component:be},{path:"GuideUserList",name:"GuideUserList",component:A},{path:"MerchantUserList",name:"MerchantUserList",component:L},{path:"TravelUserList",name:"TravelUserList",component:z},{path:"VisitorUserList",name:"VisitorUserList",component:B},{path:"TravelUserAdd",name:"TravelUserAdd",component:W},{path:"PrepayList",name:"PrepayList",component:H},{path:"PrepayAdd",name:"PrepayAdd",component:J},{path:"OrderList",name:"OrderList",component:De},{path:"OrderAdd",name:"OrderAdd",component:Ie},{path:"Merchant",name:"Merchant",component:Ce},{path:"Income",name:"Income",component:qe},{path:"People",name:"People",component:Re},{path:"Password",name:"Password",component:X}]}]});Be.beforeEach(function(e,t,a){var r=e.name;localStorage.getItem("token")?"Login"===r?a("/index"):a():"Login"===r?a():a({name:"Login"})});var Me=Be;v.a.defaults.timeout=5e3,v.a.defaults.withCredentials=!0,v.a.interceptors.request.use(function(e){return d.state.token&&(e.headers.Authorization="Bearer "+d.state.token),e},function(e){return g.a.reject(e)}),v.a.interceptors.response.use(function(e){return e},function(e){if(e.response)switch(console.log(e.response.status),e.response.status){case 401:d.commit("logout"),Me.push({name:"Login"})}return g.a.reject(e.response.data)});var Ve=v.a,We=a("jPwE"),je=a.n(We),Ge=(a("FVuk"),{name:"App",created:function(){if(window.localStorage.getItem("token")){var e={id:localStorage.getItem("id"),name:localStorage.getItem("name"),mobile:localStorage.getItem("mobile"),token:localStorage.getItem("token")};console.log("router,刷新",e),this.$store.commit("login",e)}}}),He={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},Qe=a("VU/8")(Ge,He,!1,null,null,null).exports,Ze={data:function(){return{pickerOptions0:{disabledDate:function(e){return e.getTime()>Date.now()}},value:""}},methods:{getDate:function(e){this.$emit("datePick",e)}}},Je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",editable:!1,format:e.yyyy-e.MM-e.dd,"value-format":e.yyyy-e.MM-e.dd,placeholder:"选择日期","picker-options":e.pickerOptions0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var Ye=a("VU/8")(Ze,Je,!1,function(e){a("5ip+")},"data-v-4b7c6918",null).exports,Ke={name:"Pagination",props:["totalNum"],methods:{handleSizeChange:function(e){console.log("每页"+e+"条"),this.pageSize=e,this.$emit("getPageData",{currentPage:this.currentPage,pageSize:e})},handleCurrentChange:function(e){console.log("当前页："+e),this.currentPage=e,this.$emit("getPageData",{currentPage:e,pageSize:this.pageSize})}},data:function(){return{currentPage:1,pageSize:10}}},Xe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":this.currentPage,"page-sizes":[10,20,30,40,50],"page-size":this.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.totalNum},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},staticRenderFns:[]};var et=a("VU/8")(Ke,Xe,!1,function(e){a("TbQe")},"data-v-723864f3",null).exports;l.default.use(je.a,{size:"small"}),l.default.component("date-picker",Ye),l.default.component("pagination",et),l.default.prototype.$axios=Ve,l.default.config.productionTip=!1,new l.default({el:"#app",store:d,router:Me,template:"<App/>",components:{App:Qe}})},QPfg:function(e,t){},Qgn8:function(e,t){},RIiA:function(e,t){},S7VL:function(e,t){},"So7/":function(e,t){},TbQe:function(e,t){},UjVw:function(e,t){},V17K:function(e,t){},ZcEO:function(e,t){},Zoxs:function(e,t){},aqhl:function(e,t){},cMjv:function(e,t){},cgPv:function(e,t){},"i+YZ":function(e,t){},"jSB/":function(e,t){},k3lw:function(e,t){},mUbh:function(e,t){},nWmk:function(e,t){},tczm:function(e,t){},uFJv:function(e,t){},wB4W:function(e,t){},wBCO:function(e,t){},wjH3:function(e,t){},"x+rY":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ea6a265b42aa9d71134b.js.map